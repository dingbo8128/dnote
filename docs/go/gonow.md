---
title: Go语言现状
date: 2021-10-29 08:03:08

categories: go
---

{% blockquote %}
就是所罗门极荣华的时候，他所穿戴的还不如这话一朵呢！
{% endblockquote %}

## 重大历史

![](https://static001.geekbang.org/resource/image/89/e9/89c8fa7961ef4b3812af319f22b0e1e9.png?wh=1884x1082)

1. 2007 诞生
2. 2009 开源
3. go1.5 实现自举，进入期望膨胀期
4. go1.11 引入 go module, 解决包依赖问题
5. go module 成为默认包管理机制
6. go1.18 支持泛型

## GC 历史

| 版本 | 发布时间 | GC 算法 STW 时间                                                                                                                                       | 重大更新       |
| ---- | -------- | ------------------------------------------------------------------------------------------------------------------------------------------------------ | -------------- | --------------------------------------- |
| V1.1 | 2013/5   | STW                                                                                                                                                    | 可能秒级别     |
| V1.3 | 2014/6   | Mark 和 Sweep 分离. Mark STW, Sweep 并发                                                                                                               | 百 ms 级别     |
| V1.4 | 2014/12  | runtime 代码基本都由 C 和少量汇编改为 Go 和少量汇编, 包括 GC 部分, 以此实现了准确式 GC,减少了堆大小, 同时对指针的写入引入了 write barrier, 为 1.5 铺垫 | 百 ms 级别     |
| V1.5 | 2015/8   | 三色标记法, 并发 Mark, 并发 Sweep. 非分代, 非移动, 并发的收集器                                                                                        | 10ms-40ms 级别 | 重要更新版本,生产上 GC 基本不会成为问题 |
| V1.6 | 2016/2   | 1.5 中一些与并发 GC 不协调的地方更改. 集中式的 GC 协调协程, 改为状态机实现                                                                             | 5-20ms         |
| V1.7 | 2016/8   | GC 时栈收缩改为并发, span 中对象分配状态由 freelist 改为 bitmap                                                                                        | 1-3ms 左右     |
| V1.8 | 2017/2   | hybird write barrier, 消除了 stw 中的重新扫描栈                                                                                                        | sub ms         | Golang GC 进入 Sub ms 时代              |

## 项目案例

1. Docker
2. Kubernetes
3. Ethereum
4. CockroachDB
5. InfluxDB
6. Etcd
7. Consul

## 重要概念

1. Go 1 兼容性：只有符合 Go 1 语言规范的源代码， Go 编译器都先后兼容
2. module 是一组同属于一个版本管理单元的包的集合
3. 语义版本号规范：版本号 x.y.x,主版本号.次版本号.补丁版本号

## 设计哲学

### 简单

1. 25 个关键字
2. 内置垃圾回收
3. 首字母大小写决定可见性
4. 变量初始为类型 0 值
5. 完善的工具链。。。

### 显示

无隐私类型转换

### 组合

水平组合

### 并发

原生支持并发。

### 面向工程

gofmt 统一了代码风格
